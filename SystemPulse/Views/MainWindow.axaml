<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:SystemPulse.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:app="using:SystemPulse"
		xmlns:model="using:SystemPulse.Models.Hardware"
        xmlns:conv="using:SystemPulse.Converters"
        mc:Ignorable="d" Width="180" d:DesignHeight="1080"
		SystemDecorations="None" Background="{DynamicResource SystemAltMediumHighColor}"
		ShowInTaskbar="False" ShowActivated="False" CanResize="False"
        x:Class="SystemPulse.Views.MainWindow" x:DataType="vm:MainViewModel"
        Icon="/Assets/SystemPulse.ico"
        Title="SystemPulse">
	<Window.Resources>
		<ResourceDictionary>
			<conv:HumanReadableByteSizeConverter x:Key="HumanReadableByteSizeConverter" />
			<ResourceDictionary.MergedDictionaries>
				<ResourceInclude Source="/Resources/ProgressBar.axaml" />
				<ResourceInclude Source="/Resources/Icons.axaml" />
			</ResourceDictionary.MergedDictionaries>
		</ResourceDictionary>
	</Window.Resources>
	<Window.Styles>
		<StyleInclude Source="/Resources/Style.axaml" />
	</Window.Styles>
	<StackPanel Margin="10,75,10,0">
		<StackPanel Classes="Header" Orientation="Horizontal" HorizontalAlignment="Center">
			<Canvas Width="30" Height="30">
				<Ellipse Width="30" Height="30" Stroke="{DynamicResource SystemBaseHighColor}" StrokeThickness="1.5"/>
				<Line StartPoint="15,15" EndPoint="15,9" Stroke="{DynamicResource SystemBaseHighColor}" StrokeThickness="2.5" StrokeLineCap="Round">
					<Line.RenderTransform>
						<RotateTransform CenterX="7.5" CenterY="7.5" Angle="{Binding HourRotation}"/>
					</Line.RenderTransform>
				</Line>
				<Line StartPoint="15,15" EndPoint="15,5" Stroke="{DynamicResource SystemBaseHighColor}" StrokeThickness="1.5" StrokeLineCap="Round">
					<Line.RenderTransform>
						<RotateTransform CenterX="7.5" CenterY="7.5" Angle="{Binding MinuteRotation}"/>
					</Line.RenderTransform>
					<Line.Effect>
						<DropShadowEffect BlurRadius="2" Color="{DynamicResource SystemAltHighColor}" OffsetX="0" OffsetY="0" />
					</Line.Effect>
				</Line>
			</Canvas>
			<Label Content="Time" />
		</StackPanel>
		<Label Content="{Binding Now, StringFormat=T}}" MinWidth="90" HorizontalAlignment="Center" FontSize="20" PointerReleased="LabelPointerReleasedHandler" />
		<StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
			<Label Content="{Binding Now, StringFormat=ddd\,}}" HorizontalAlignment="Center" FontSize="16" />
			<Label Content="{Binding Now, StringFormat=d}}" HorizontalAlignment="Center" FontSize="16" PointerReleased="LabelPointerReleasedHandler" />
		</StackPanel>
		<StackPanel Classes="Header" Orientation="Horizontal" HorizontalAlignment="Center">
			<PathIcon Data="{StaticResource Cpu}" />
			<Label Content="CPU" />
		</StackPanel>
		<ProgressBar Height="25" Classes="Load" DataContext="{Binding Hardwares[Cpu].Sensors[Load/CPUTotal]}" Value="{Binding Value}" Classes.isAlert="{Binding IsAlert}"
					 ToolTip.Tip="{Binding Value, StringFormat=Cpu Usage: {0:0.00}%}" />
		<ItemsControl ItemsSource="{Binding PhysicalCores}" Margin="0,5,0,0">
			<ItemsControl.ItemsPanel>
				<ItemsPanelTemplate>
					<WrapPanel Orientation="Horizontal" HorizontalAlignment="Center" />
				</ItemsPanelTemplate>
			</ItemsControl.ItemsPanel>
			<ItemsControl.ItemTemplate>
				<DataTemplate>
					<ItemsControl Margin="1" ItemsSource="{Binding LogicalCores}" x:DataType="model:PhysicalCore" BorderThickness="1" CornerRadius="3" BorderBrush="{DynamicResource SystemBaseHighColor}">
						<ItemsControl.ItemsPanel>
							<ItemsPanelTemplate>
								<StackPanel Orientation="Horizontal" />
							</ItemsPanelTemplate>
						</ItemsControl.ItemsPanel>
						<ItemsControl.ItemTemplate>
							<DataTemplate>
								<ProgressBar Width="18" Height="40" Classes="Load" Orientation="Vertical" x:DataType="model:LogicalCore" BorderThickness="0"
											 Value="{Binding LoadValue.Value}" Classes.isAlert="{Binding LoadValue.IsAlert}" ToolTip.Tip="{Binding LoadValue.Value, StringFormat=Core Usage: {0:0}%}" />
							</DataTemplate>
						</ItemsControl.ItemTemplate>
					</ItemsControl>
				</DataTemplate>
			</ItemsControl.ItemTemplate>
		</ItemsControl>

		<StackPanel Classes="Header" Orientation="Horizontal" HorizontalAlignment="Center">
			<PathIcon Data="{StaticResource Ram}" />
			<Label Content="RAM" />
		</StackPanel>
		<ProgressBar Height="25" Classes="Load" DataContext="{Binding Hardwares[Memory].Sensors}" Value="{Binding [Load/Memory].Value}" Classes.isAlert="{Binding [Load/Memory].IsAlert}"
					 ToolTip.Tip="{Binding [Data/MemoryAvailable].Value, StringFormat=Free Space: {0:0.00} GB}" />

		<StackPanel Classes="Header" Orientation="Horizontal" HorizontalAlignment="Center">
			<PathIcon Data="{StaticResource Gpu}" />
			<Label Content="GPU" />
		</StackPanel>
		<ProgressBar Height="25" Classes="Load" DataContext="{Binding Hardwares[Gpu].Sensors[Load/GPUCore]}" Value="{Binding Value}" Classes.isAlert="{Binding IsAlert}"
					 ToolTip.Tip="{Binding Value, StringFormat=Graphics Usage: {0:0}%}" />
		<ProgressBar Height="10" Margin="0,5,0,0" Classes="Load" DataContext="{Binding Hardwares[Gpu].Sensors}" Value="{Binding [Load/GPUMemory].Value}" Classes.isAlert="{Binding [Load/GPUMemory].IsAlert}"
					 ToolTip.Tip="{Binding [SmallData/GPUMemoryFree].Value, StringFormat=Free Space: {0}B, Converter={StaticResource HumanReadableByteSizeConverter}, ConverterParameter=2}" />

		<StackPanel Classes="Header" Orientation="Horizontal" HorizontalAlignment="Center">
			<PathIcon Data="{StaticResource Storage}" />
			<Label Content="STORAGE" />
		</StackPanel>
		<ItemsControl ItemsSource="{Binding Drives}">
			<ItemsControl.ItemTemplate>
				<DataTemplate>
					<Grid Margin="0,0,0,5" ColumnDefinitions="25, *">
						<Label Grid.Column="0" Content="{Binding Name}" VerticalAlignment="Center" FontSize="16" />
						<ProgressBar Grid.Column="1" Classes="Load" Value="{Binding Sensors[Load].Value}" Classes.isAlert="{Binding Sensors[Load].IsAlert}"
									 ToolTip.Tip="{Binding Sensors[Load/FreeSpace].Value, StringFormat=Free Space: {0:0.00}B, Converter={StaticResource HumanReadableByteSizeConverter}}" />
					</Grid>
				</DataTemplate>
			</ItemsControl.ItemTemplate>
		</ItemsControl>

		<StackPanel Classes="Header" Orientation="Horizontal" HorizontalAlignment="Center">
			<PathIcon Data="{StaticResource Network}" />
			<Label Content="NETWORK" />
		</StackPanel>
		<Label Classes="Censor" Content="{Binding IpAddress}" HorizontalAlignment="Center" ToolTip.Tip="External IP" PointerReleased="LabelPointerReleasedHandler" />
		<ProgressBar Height="25" Classes="Load" DataContext="{Binding Hardwares[Network].Sensors[Throughput/DownloadSpeed]}"
					 Value="{Binding Value}" Maximum="{Binding Source={x:Static app:Settings.Default}, Path=DownloadBandwidth}"
					 ToolTip.Tip="{Binding Value, StringFormat=Download: {0:0}B/s, Converter={StaticResource HumanReadableByteSizeConverter}}" />
		<ProgressBar Height="10" Margin="0,5,0,0" Classes="Load" DataContext="{Binding Hardwares[Network].Sensors[Throughput/UploadSpeed]}"
					 Value="{Binding Value}" Maximum="{Binding Source={x:Static app:Settings.Default}, Path=UploadBandwidth}"
					 ToolTip.Tip="{Binding Value, StringFormat=Upload: {0:0}B/s, Converter={StaticResource HumanReadableByteSizeConverter}}" />
	</StackPanel>
</Window>
